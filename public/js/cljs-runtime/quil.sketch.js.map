{"version":3,"sources":["quil/sketch.cljs"],"mappings":"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","names":["quil.sketch/*applet*","quil.sketch/current-applet","js/p5.prototype","quil.sketch/rendering-modes","quil.sketch/resolve-renderer","mode","cljs.core._EQ_","quil.util/resolve-constant-key","quil.sketch/set-size","applet","width","height","temp__5804__auto__","el","inner-canvas","js/window","goog.style/getComputedStyle","var_args","G__20782","quil.sketch/size","js/Error","quil.sketch/bind-handlers","prc","opts","seq__20783","cljs.core/seq","chunk__20784","count__20785","i__20786","vec__20839","cljs.core.nth","cljs.core/chunked-seq?","c__5568__auto__","cljs.core/chunk-first","cljs.core/chunk-rest","cljs.core/count","vec__20844","cljs.core/first","cljs.core/next","processing-name","quil-name","handler","cljs.core/name","*applet*-orig-val__20842","*applet*-temp-val__20843","*applet*-orig-val__20847","*applet*-temp-val__20848","quil.sketch/in-fullscreen?","or__5045__auto__","js/document","quil.sketch/add-fullscreen-support","old-size","cljs.core.atom","adjust-canvas-size","cljs.core/reset!","cljs.core/deref","cljs.core.apply","goog.events/listen","goog.events.EventType/KEYDOWN","event","cljs.core/not","canvas","js/console","p1__20849#","quil.sketch/make-sketch","options","cljs.core/cons","quil.middlewares.deprecated-options/deprecated-options","cljs.core/comp","p1__20850#","cljs.core.merge","sketch-size","renderer","features","cljs.core/set","setup","cljs.core.concat","fexpr__20851","fexpr__20852","mouse-wheel","G__20854","fexpr__20853","cljs.core.assoc","sketch","quil.util/initial-internal-state","quil.sketch/destroy-previous-sketch","host-elem","proc-obj","args__5775__auto__","len__5769__auto__","i__5770__auto__","argseq__5776__auto__","cljs.core/IndexedSeq","quil.sketch/sketch","seq20870","self__5755__auto__","opts-map","cljs.core/hash-map","js/p5","quil.sketch/sketch-init-list","quil.sketch/empty-body?","child","quil.sketch/add-canvas","canvas-id","quil.sketch/init-sketches","add-elem?","seq__20882","chunk__20883","count__20884","i__20885","sk","fexpr__20899","fexpr__20907","quil.sketch/add-sketch-to-init-list","cljs.core.swap_BANG_","cljs.core/conj","goog.events/listenOnce","goog.events.EventType/LOAD","cljs.core/List"],"sourcesContent":["(ns quil.sketch\n  (:require [quil.util :as u :include-macros true]\n            [quil.middlewares.deprecated-options :as do]\n            [goog.dom :as dom]\n            [goog.events :as events]\n            [goog.style :as style]\n            [goog.events.EventType :as EventType])\n  (:require-macros [quil.sketch]))\n\n(def ^:dynamic\n  *applet* nil)\n\n(defn current-applet [] *applet*)\n\n(u/generate-quil-constants :cljs\n                           rendering-modes (:java2d :p2d :p3d :opengl))\n\n(defn resolve-renderer [mode]\n  (if (= :p3d mode)\n    (aget js/p5.prototype \"WEBGL\")\n    (u/resolve-constant-key mode rendering-modes)))\n\n(defn set-size [applet width height]\n  (when-let [el (.-quil-canvas applet)]\n    ; p5js creates a <canvas> element inside provided <div> element\n    ; we need to resize only the canvas as outer div will adapt automatically\n    (let [inner-canvas (.querySelector el \"canvas\")]\n      (.setAttribute inner-canvas \"width\" width)\n      (.setAttribute inner-canvas \"height\" height)\n      (aset (.-style inner-canvas) \"width\" (str width \"px\"))\n      (aset (.-style inner-canvas) \"height\" (str height \"px\"))\n      (set! (.-width applet)\n            (.parseInt js/window (style/getComputedStyle inner-canvas \"width\")))\n      (set! (.-height applet)\n            (.parseInt js/window (style/getComputedStyle inner-canvas \"height\"))))))\n\n(defn size\n  ([width height]\n   (.createCanvas (current-applet) (int width) (int height)))\n\n  ([width height mode]\n   (.createCanvas (current-applet) (int width) (int height) (resolve-renderer mode))))\n\n(defn- bind-handlers [prc opts]\n  (doseq [[processing-name quil-name] {:setup :setup\n                                       :draw :draw\n\n                                       :keyPressed :key-pressed\n                                       :keyReleased :key-released\n                                       :keyTyped :key-typed\n\n                                       :mouseClicked :mouse-clicked\n                                       :mouseDragged :mouse-dragged\n                                       :mouseMoved :mouse-moved\n                                       :mousePressed :mouse-pressed\n                                       :mouseReleased :mouse-released\n                                       :mouseOut :mouse-exited\n                                       :mouseOver :mouse-entered\n                                       :mouseScrolled :mouse-wheel}]\n    (when-let [handler (opts quil-name)]\n      (aset prc (name processing-name)\n            (fn []\n              (quil.sketch/with-sketch prc\n                (handler)))))))\n\n(defn in-fullscreen? []\n  (or (.-fullscreenElement js/document)\n      (.-mozFullScreenElement js/document)))\n\n(defn add-fullscreen-support\n  \"Adds fullscreen support for provided Processing object.\n  Fullscreen is enabled when user presses F11. We turn\n  sketch <canvas> element to fullscreen storing old size\n  in an atom. When user cancels fullscreen (F11 or Esc)\n  we resize sketch to the old size.\"\n  [applet]\n  (let [old-size (atom nil)\n        adjust-canvas-size\n        (fn []\n          (if (in-fullscreen?)\n            (do\n              (reset! old-size\n                      [(.-width applet) (.-height applet)])\n              (set-size applet\n                        (-> js/window .-screen .-width)\n                        (-> js/window .-screen .-height)))\n            (apply set-size applet @old-size)))]\n    (events/listen js/window EventType/KEYDOWN\n                   (fn [event]\n                     (when (and (= (.-key event) \"F11\")\n                                (not (in-fullscreen?)))\n                       (.preventDefault event)\n                       (let [canvas (.-quil-canvas applet)]\n                         (cond (.-requestFullscreen canvas) (.requestFullscreen canvas)\n                               (.-mozRequestFullScreen canvas) (.mozRequestFullScreen canvas)\n                               :else (.warn js/console \"Fullscreen mode is not supported in current browser.\"))))))\n    (events/listen js/document \"fullscreenchange\" adjust-canvas-size)\n    (events/listen js/document \"mozfullscreenchange\" adjust-canvas-size)\n    (events/listen js/document \"fullscreenerror\"\n                   #(.error js/console \"Error while switching to/from fullscreen: \" %))))\n\n(defn make-sketch [options]\n  (let [opts            (->> (:middleware options [])\n                             (cons do/deprecated-options)\n                             (apply comp)\n                             (#(% options))\n                             (merge {:size [500 300]}))\n\n        sketch-size     (:size opts)\n        renderer        (:renderer opts)\n        features        (set (:features opts))\n\n        setup (fn []\n                (->> (if renderer [renderer] [])\n                     (concat sketch-size)\n                     (apply size))\n                (when (:settings opts) ((:settings opts)))\n                (when (:setup opts) ((:setup opts))))\n        mouse-wheel (when (:mouse-wheel opts)\n                      ;; -1 need for compability with Clojure version\n                      #((:mouse-wheel opts) (* -1 (.-mouseScroll *applet*))))\n\n        opts (assoc opts\n                    :setup setup\n                    :mouse-wheel mouse-wheel)\n\n        sketch (fn [prc]\n                 (bind-handlers prc opts)\n                 (set! (.-quil prc) (atom nil))\n                 (set! (.-quil-internal-state prc) (atom u/initial-internal-state)))]\n    sketch))\n\n(defn destroy-previous-sketch [host-elem]\n  (when-let [proc-obj (.-processing-obj host-elem)]\n    (.remove proc-obj)))\n\n(defn sketch [& opts]\n  (let [opts-map (apply hash-map opts)\n        host-elem (:host opts-map)\n        renderer (or (:renderer opts-map) :p2d)\n        host-elem (if (string? host-elem)\n                    (.getElementById js/document host-elem)\n                    host-elem)]\n    (if host-elem\n      (do\n        (if (.-processing-context host-elem)\n          (when-not (= renderer (.-processing-context host-elem))\n            (.warn js/console \"WARNING: Using different context on one canvas!\"))\n          (set! (.-processing-context host-elem) renderer))\n        (destroy-previous-sketch host-elem)\n        (let [proc-obj (js/p5. (make-sketch opts-map) host-elem)]\n          (set! (.-processing-obj host-elem) proc-obj)\n          (set! (.-quil-canvas proc-obj) host-elem)\n          (add-fullscreen-support proc-obj)\n          proc-obj))\n      (.error js/console\n              (if (:host opts-map)\n                (str \"ERROR: Cannot find host element: \" (:host opts-map))\n                \"ERROR: Cannot create sketch. :host is not specified or element not found.\")))))\n\n(def sketch-init-list (atom (list)))\n\n(defn empty-body? []\n  (let [child (.-childNodes (.-body js/document))]\n    ; seems hacky, we should come up with better way of\n    ; checking whether body is empty or not\n    (<= (.-length child) 1)))\n\n(defn add-canvas [canvas-id]\n  (let [canvas (.createElement js/document \"canvas\")]\n    (.setAttribute canvas \"id\" canvas-id)\n    (.appendChild (.-body js/document) canvas)))\n\n(defn init-sketches []\n  (let [add-elem? (empty-body?)]\n    (doseq [sk @sketch-init-list]\n      (when add-elem?\n        (add-canvas (:host-id sk)))\n      ((:fn sk))))\n  (reset! sketch-init-list []))\n\n(defn add-sketch-to-init-list [sk]\n  (swap! sketch-init-list conj sk)\n  ; if page already loaded immediately init sketch we just added\n  (when (= (.-readyState js/document) \"complete\")\n    (init-sketches)))\n\n(events/listenOnce js/window EventType/LOAD init-sketches)\n"],"x_google_ignoreList":[0]}